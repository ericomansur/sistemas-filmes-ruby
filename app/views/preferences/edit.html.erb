<div class="max-w-4xl mx-auto">
  <!-- Header -->
  <div class="mb-8">
    <h1 class="text-4xl font-bold text-white mb-2">âš™ï¸ Configure suas PreferÃªncias</h1>
    <p class="text-gray-400 text-lg">
      Responda algumas perguntas para receber recomendaÃ§Ãµes personalizadas
    </p>
  </div>

  <%= form_with model: @preference, url: preferences_path, method: :patch, class: "space-y-8" do |f| %>
    <!-- GÃªneros Favoritos -->
    <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
      <h2 class="text-2xl font-semibold text-white mb-4">ğŸ­ Quais gÃªneros vocÃª gosta?</h2>
      <p class="text-gray-400 mb-4">Selecione um ou mais gÃªneros (quanto mais, melhor!)</p>
      
      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
        <% @genres.each do |genre| %>
          <label class="flex items-center space-x-2 bg-gray-700 hover:bg-gray-600 p-3 rounded-lg cursor-pointer transition border border-gray-600 hover:border-indigo-500">
            <%= f.check_box :favorite_genres, 
                           { multiple: true, checked: @preference.favorite_genres&.include?(genre.tmdb_id.to_s), class: "rounded text-indigo-600 focus:ring-indigo-500" }, 
                           genre.tmdb_id.to_s, 
                           nil %>
            <span class="text-white font-medium"><%= genre.name %></span>
          </label>
        <% end %>
      </div>
    </div>

    <!-- PerÃ­odo de LanÃ§amento -->
    <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
      <h2 class="text-2xl font-semibold text-white mb-4">ğŸ“… PerÃ­odo de LanÃ§amento</h2>
      <p class="text-gray-400 mb-4">Filmes de qual Ã©poca vocÃª prefere?</p>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <%= f.label :min_year, "Ano MÃ­nimo", class: "block text-white font-medium mb-2" %>
          <%= f.number_field :min_year, 
                            placeholder: "Ex: 1990",
                            min: 1900,
                            max: Time.current.year,
                            class: "w-full bg-gray-700 border border-gray-600 text-white rounded-lg px-4 py-3 focus:ring-2 focus:ring-indigo-500 focus:border-transparent" %>
          <p class="text-gray-500 text-sm mt-1">Deixe em branco para sem limite</p>
        </div>

        <div>
          <%= f.label :max_year, "Ano MÃ¡ximo", class: "block text-white font-medium mb-2" %>
          <%= f.number_field :max_year, 
                            placeholder: "Ex: 2024",
                            min: 1900,
                            max: Time.current.year,
                            class: "w-full bg-gray-700 border border-gray-600 text-white rounded-lg px-4 py-3 focus:ring-2 focus:ring-indigo-500 focus:border-transparent" %>
          <p class="text-gray-500 text-sm mt-1">Deixe em branco para sem limite</p>
        </div>
      </div>
    </div>

    <!-- AvaliaÃ§Ã£o MÃ­nima -->
    <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
      <h2 class="text-2xl font-semibold text-white mb-4">â­ AvaliaÃ§Ã£o MÃ­nima</h2>
      <p class="text-gray-400 mb-4">Qual a nota mÃ­nima dos filmes que vocÃª quer ver? (0 a 10)</p>
      
      <div class="max-w-md">
        <%= f.label :min_rating, "Nota MÃ­nima (TMDB)", class: "block text-white font-medium mb-2" %>
        <%= f.number_field :min_rating, 
                          placeholder: "Ex: 7.0",
                          step: 0.1,
                          min: 0,
                          max: 10,
                          class: "w-full bg-gray-700 border border-gray-600 text-white rounded-lg px-4 py-3 focus:ring-2 focus:ring-indigo-500 focus:border-transparent" %>
        <p class="text-gray-500 text-sm mt-1">Recomendado: 6.0 ou superior para filmes bem avaliados</p>
      </div>
    </div>

    <!-- Idioma Preferido -->
    <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
      <h2 class="text-2xl font-semibold text-white mb-4">ğŸŒ Idioma dos Resultados</h2>
      <p class="text-gray-400 mb-4">Em qual idioma vocÃª prefere ver os tÃ­tulos e descriÃ§Ãµes?</p>
      
      <div class="max-w-md">
        <%= f.label :preferred_language, "Idioma", class: "block text-white font-medium mb-2" %>
        <%= f.select :preferred_language,
                     [['PortuguÃªs (Brasil)', 'pt-BR'], ['InglÃªs', 'en-US'], ['Espanhol', 'es-ES']],
                     { selected: @preference.preferred_language || 'pt-BR' },
                     class: "w-full bg-gray-700 border border-gray-600 text-white rounded-lg px-4 py-3 focus:ring-2 focus:ring-indigo-500 focus:border-transparent" %>
      </div>
    </div>

    <!-- BotÃµes de AÃ§Ã£o -->
    <div class="flex flex-col sm:flex-row gap-4 justify-end">
      <%= link_to dashboard_path, class: "bg-gray-700 hover:bg-gray-600 text-white font-semibold py-3 px-6 rounded-lg transition text-center" do %>
        Cancelar
      <% end %>
      
      <%= f.submit "Salvar e Gerar RecomendaÃ§Ãµes", 
                  class: "bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition cursor-pointer" %>
    </div>
  <% end %>

  <!-- Dica -->
  <div class="mt-8 bg-blue-900 border border-blue-700 rounded-lg p-4">
    <div class="flex items-start space-x-3">
      <svg class="w-6 h-6 text-blue-400 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
      </svg>
      <div>
        <h4 class="text-blue-300 font-semibold">ğŸ’¡ Dica</h4>
        <p class="text-blue-200 text-sm mt-1">
          Quanto mais especÃ­ficas suas preferÃªncias, melhores serÃ£o as recomendaÃ§Ãµes! 
          VocÃª pode voltar aqui a qualquer momento para ajustar.
        </p>
      </div>
    </div>
  </div>
</div>